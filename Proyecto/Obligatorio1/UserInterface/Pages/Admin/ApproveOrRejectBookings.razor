@page "/ApproveOrRejectBookings"
@using Logic
@using Model;
@using Model.Enums
@layout MainLayout
@inject SessionLogic SessionLogic
@inject NavigationManager NavigationManager

<PageTitle>DepoQuick</PageTitle>

<section class="vh-75">
    <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-75">
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
                <form>
                    <div class="divider d-flex align-items-center my-4">
                        <p class="text-center fw-bold mx-3 mb-0 fs-4" style="display: inline-block">Approve Or Reject Bookings</p>
                    </div>
                    <div data-mdb-input-init class="form-outline mb-2">
                        <select multiple class="form-select form-select-lg" required>
                            <option value="booking1">Booking 1</option>
                            <option value="booking2">Booking 2</option>
                            <option value="booking3">Booking 3</option>
                        </select>
                        <label class="form-label">Bookings</label>
                    </div>
                    @if (!showRejectInput)
                    {
                        <div class="text-center text-lg-start pt-2">
                            <button type="submit" class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;" @onclick="ToggleRejectInput">Reject the Booking</button>
                        </div>
                        <div class="text-center text-lg-start pt-2">
                            <button type="submit" class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;">Accept the Booking</button>
                        </div>
                    }
                   @if (showRejectInput) 
                        {
                            <div data-mdb-input-init class="form-outline mt-2 mb-2">
                                <input type="text" class="form-control form-control-lg" placeholder="Reason for rejection" required />
                                <label class="form-label">Rejection</label>
                            </div>
                            <div class="text-center text-lg-start pt-2">
                                <button type="submit" class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;">Confirm the Rejection</button>
                            </div>
                            <p class="small fw-bold mt-2 pt-1 mb-0">Changed your decision? <a href="#" @onclick="RefreshPage" class="link-danger">Go Back</a></p>
                        }
                </form>
            </div>
        </div>
    </div>
</section>

@code {
    private bool showRejectInput = false;

    private void ToggleRejectInput()
    {
        showRejectInput = !showRejectInput;
    }
    
    private void RefreshPage()
    {
        NavigationManager.NavigateTo("/ApproveOrRejectBookings");
    }

}
